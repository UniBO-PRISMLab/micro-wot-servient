{"ssid":"Rachelli-net","password":"3eKLtrdFwfQXgpv!","portserver":"80","portsocket":"81","portcoap":"5683","libraries":[],"constants":[],"globals":[{"name":"GREENLED","type":"const int","value":"12"},{"name":"SENSOR0","type":"const int","value":"14"},{"name":"REDLED","type":"const int","value":"33"},{"name":"SENSOR1","type":"const int","value":"13"},{"name":"sensor0_prev","type":"int","value":"LOW"},{"name":"sensor1_prev","type":"int","value":"LOW"}],"setup":"property0_value[0] = false;\nproperty0_value[1] = false;\n// property0_value[2] = false;\n// This statement will declare pin 22 as digital output \npinMode(GREENLED, OUTPUT);\npinMode(REDLED, OUTPUT);\n// This statement will declare pin 15 as digital input \npinMode(SENSOR0, INPUT);\npinMode(SENSOR1, INPUT);\n","loop":"//get pushbutton state\nint state0 = digitalRead(SENSOR0);\nint state1 = digitalRead(SENSOR1);\n//Set semaphore status\nif (state0 == HIGH && state1 == HIGH) {\n  digitalWrite(GREENLED, HIGH);\n  digitalWrite(REDLED, LOW);\n} else {\n  digitalWrite(GREENLED, LOW); \n  digitalWrite(REDLED, HIGH);\n}\n\n//Change status of park 0\nif (state0 != sensor0_prev) {\n  sensor0_prev = state0;\n  emitEvent(changeParkState(0), \"hasParkChanged\");\n}\n\n//Change status of park 1\nif (state1 != sensor1_prev) {\n  sensor1_prev = state1;\n  emitEvent(changeParkState(1), \"hasParkChanged\");\n}","code":"","actionFunctions":[{"source":"cli","name":"isParkFree","body":"return property0_value[rack_num].as<bool>();","output":{"name":"","type":"boolean"},"input":[{"name":"rack_num","type":"integer"}]},{"source":"cli","name":"changeParkState","body":"// char s[25];\nproperty0_value[park] = !property0_value[park];\n// sprintf(s, \"Park %d is now %s\", park, (property0_value[park]) ? \"occupied\" : \"free\");\n// // s = \"Changed park 1 to \";\n// // s += (property0_value[park]) ? \"occupied\" : \"free\";\n// Serial.println(s);\n// return s;\nreturn request4();","output":{"name":"","type":"string"},"input":[{"name":"park","type":"integer"}]}],"eventConditions":[{"condition":"true","actions":["changeParkState"]}]}